import cv2
import aam
import numpy as np

shape = [0.308616, -0.209108, 0.316772, -0.0291648, 0.312878, 0.139717, 0.290374, 0.304333, 0.257956, 0.468746, 0.204954, 0.609373, 0.137929, 0.716166, 0.0470799, 0.768382, -0.0486298, 0.706977, -0.130341, 0.602217, -0.189516, 0.45047, -0.229874, 0.288441, -0.236574, 0.10923, -0.23468, -0.071417, -0.22487, -0.24636, -0.184466, -0.275604, -0.128821, -0.364143, -0.0334346, -0.350741, 0.00882608, -0.272798, -0.0420344, -0.281235, -0.128469, -0.289008, 0.295264, -0.245523, 0.258506, -0.334594, 0.192814, -0.331533, 0.141366, -0.256873, 0.203835, -0.263615, 0.253462, -0.265975, 0.259965, -0.116992, 0.212245, -0.13743, 0.152915, -0.115326, 0.209197, -0.0987101, -0.134524, -0.139377, -0.0706273, -0.150005, -0.0138351, -0.127199, -0.0640638, -0.114287, 0.114312, -0.126091, 0.132298, 0.0132524, 0.165832, 0.151134, 0.126773, 0.210471, 0.0864713, 0.203506, 0.0336286, 0.205041, -0.0088936, 0.1586, 0.0225655, 0.00993903, 0.039272, -0.137357, 0.125746, 0.171032, 0.0384427, 0.156022, 0.172703, 0.415269, 0.15587, 0.353403, 0.118372, 0.313064, 0.0863143, 0.31779, 0.054082, 0.305669, 0.00865686, 0.341375, -0.0246734, 0.412963, -0.00264085, 0.471736, 0.0258567, 0.51999, 0.0769246, 0.540307, 0.12122, 0.519552, 0.150653, 0.471465, 0.12566, 0.410839, 0.0786944, 0.42993, 0.0302177, 0.407909, 0.0267932, 0.367742, 0.083632, 0.350634, 0.129347, 0.369354, 0.0904621, 0.107974, 0.235264, -0.128623, 0.234758, -0.102121, 0.179965, -0.106389, 0.182501, -0.13617, -0.0407739, -0.147371, -0.0398573, -0.114349, -0.101145, -0.120642, -0.101908, -0.152062, 0.19578, -0.126394, -0.0617876, -0.132899]
for i in range(0, len(shape), 2):
	shape[i] = shape[i] * 640. + 640.
	shape[i + 1] = shape[i + 1] * 360. + 360.
shape = np.asarray(shape, np.float32)

#aam.build_and_save("../../video/test.avi" ,"../../video/test.model")
aam.load("../../video/test.model")
norm_shape = aam.normalize_shape(shape)
print(norm_shape)
image = aam.render_norm_shape(norm_shape)
print(image.shape)
cv2.imshow("image", image)
cv2.waitKey()
